<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Yumr</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="app">

    <!-- ============================================
         SPLASH SCREEN
         ============================================ -->
    <div class="screen active" id="splash">
        <div class="splash-content">
            <div class="splash-logo">ğŸ½ï¸</div>
            <h1 class="splash-title">Yumr</h1>
            <p class="splash-tagline">Cuisine. Partage. Progresse.</p>
            <div class="splash-loader"><div class="splash-loader-fill"></div></div>
        </div>
    </div>

    <!-- ============================================
         ONBOARDING (3 slides max)
         ============================================ -->
    <div class="screen" id="onboarding">
        <div class="ob-container">
            <div class="ob-slides">
                <div class="ob-slide active" data-slide="0">
                    <div class="ob-illustration">ğŸ‘†</div>
                    <h1>Dis-nous ce que tu aimes</h1>
                    <p>Swipe pour nous aider Ã  te connaÃ®tre</p>
                </div>
                <div class="ob-slide" data-slide="1">
                    <div class="ob-illustration">ğŸ½ï¸</div>
                    <h1>ReÃ§ois ton menu personnalisÃ©</h1>
                    <p>Chaque jour, des idÃ©es adaptÃ©es Ã  tes goÃ»ts</p>
                </div>
                <div class="ob-slide" data-slide="2">
                    <div class="ob-illustration">ğŸ†</div>
                    <h1>Progresse en cuisinant</h1>
                    <p>Gagne des XP, dÃ©bloque des badges, dÃ©fie tes amis</p>
                </div>
            </div>
            <div class="ob-dots">
                <span class="ob-dot active"></span>
                <span class="ob-dot"></span>
                <span class="ob-dot"></span>
            </div>
            <div class="ob-actions">
                <button class="btn btn-primary btn-full" id="ob-next">C'est parti !</button>
                <button class="btn btn-link" id="ob-login">J'ai dÃ©jÃ  un compte</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         QUIZ (Swipe + PrÃ©fÃ©rences intÃ©grÃ©es)
         ============================================ -->
    <div class="screen" id="quiz">
        <!-- Phase 1: Choix du nombre -->
        <div class="quiz-phase active" id="quiz-choice">
            <button class="btn-back" id="quiz-back-choice">â†</button>
            <div class="quiz-choice-content">
                <div class="quiz-choice-icon">ğŸ½ï¸</div>
                <h1>CrÃ©ons ton profil gourmand</h1>
                <p>Combien de plats veux-tu Ã©valuer ?</p>
                <div class="quiz-choice-options">
                    <button class="quiz-choice-opt" data-count="10">
                        <span class="opt-number">10</span>
                        <span class="opt-label">Rapide</span>
                        <span class="opt-time">~2 min</span>
                    </button>
                    <button class="quiz-choice-opt selected" data-count="20">
                        <span class="opt-number">20</span>
                        <span class="opt-label">IdÃ©al</span>
                        <span class="opt-time">~4 min</span>
                    </button>
                    <button class="quiz-choice-opt" data-count="30">
                        <span class="opt-number">30</span>
                        <span class="opt-label">Complet</span>
                        <span class="opt-time">~6 min</span>
                    </button>
                </div>
                <button class="btn btn-primary btn-full" id="quiz-start">Commencer</button>
            </div>
        </div>

        <!-- Phase 2: Swipe -->
        <div class="quiz-phase" id="quiz-swipe">
            <div class="quiz-header">
                <button class="btn-icon" id="quiz-close">âœ•</button>
                <div class="quiz-progress">
                    <div class="quiz-progress-fill" id="quiz-progress-fill"></div>
                </div>
                <span class="quiz-counter" id="quiz-counter">1/20</span>
            </div>
            <div class="quiz-card-area">
                <div class="quiz-card" id="quiz-card">
                    <div class="quiz-card-img" id="quiz-card-img"></div>
                    <div class="quiz-card-content">
                        <span class="quiz-card-emoji" id="quiz-card-emoji">ğŸ•</span>
                        <h2 id="quiz-card-name">Pizza Margherita</h2>
                        <p id="quiz-card-desc">Tomate, mozzarella, basilic</p>
                    </div>
                    <div class="quiz-card-overlay nope">NOPE</div>
                    <div class="quiz-card-overlay love">J'ADORE</div>
                </div>
            </div>
            <div class="quiz-actions">
                <button class="quiz-btn nope" id="quiz-nope">âœ•</button>
                <button class="quiz-btn love" id="quiz-love">â™¥</button>
            </div>
            <p class="quiz-hint">Swipe ou appuie sur les boutons</p>
        </div>

        <!-- Phase 3: PrÃ©fÃ©rences rapides (intÃ©grÃ©) -->
        <div class="quiz-phase" id="quiz-prefs">
            <div class="quiz-prefs-content">
                <span class="quiz-prefs-badge">DerniÃ¨re Ã©tape !</span>
                <h1>Quelques prÃ©cisions</h1>
                <p>Pour des suggestions encore plus adaptÃ©es</p>
                
                <div class="prefs-section">
                    <h3>Ton rÃ©gime alimentaire</h3>
                    <div class="prefs-grid">
                        <label class="pref-option">
                            <input type="radio" name="diet" value="omnivore" checked>
                            <div class="pref-card"><span>ğŸ–</span><span>Omnivore</span></div>
                        </label>
                        <label class="pref-option">
                            <input type="radio" name="diet" value="vegetarian">
                            <div class="pref-card"><span>ğŸ¥¬</span><span>VÃ©gÃ©tarien</span></div>
                        </label>
                        <label class="pref-option">
                            <input type="radio" name="diet" value="vegan">
                            <div class="pref-card"><span>ğŸŒ±</span><span>VÃ©gan</span></div>
                        </label>
                        <label class="pref-option">
                            <input type="radio" name="diet" value="flexitarian">
                            <div class="pref-card"><span>ğŸŸ</span><span>Flexitarien</span></div>
                        </label>
                    </div>
                </div>

                <div class="prefs-section">
                    <h3>Des allergies ?</h3>
                    <div class="prefs-chips">
                        <label class="pref-chip"><input type="checkbox" name="allergy" value="gluten"><span>ğŸŒ¾ Gluten</span></label>
                        <label class="pref-chip"><input type="checkbox" name="allergy" value="lactose"><span>ğŸ¥› Lactose</span></label>
                        <label class="pref-chip"><input type="checkbox" name="allergy" value="nuts"><span>ğŸ¥œ Noix</span></label>
                        <label class="pref-chip"><input type="checkbox" name="allergy" value="seafood"><span>ğŸ¦ CrustacÃ©s</span></label>
                        <label class="pref-chip"><input type="checkbox" name="allergy" value="eggs"><span>ğŸ¥š Å’ufs</span></label>
                    </div>
                </div>

                <button class="btn btn-primary btn-full" id="quiz-finish">Voir mon profil</button>
            </div>
        </div>

        <!-- Phase 4: RÃ©sultat -->
        <div class="quiz-phase" id="quiz-result">
            <div class="result-content">
                <div class="result-confetti" id="result-confetti"></div>
                <span class="result-badge">ğŸ‰ Profil crÃ©Ã© !</span>
                <div class="result-profile">
                    <span class="result-emoji" id="result-emoji">ğŸ</span>
                    <h1 id="result-title">L'Italien</h1>
                    <p id="result-desc">Tu craques pour les saveurs mÃ©diterranÃ©ennes</p>
                    <div class="result-tags" id="result-tags"></div>
                </div>
                <div class="result-xp">
                    <span>âœ¨</span>
                    <span>+100 XP gagnÃ©s !</span>
                </div>
                <button class="btn btn-primary btn-full" id="result-signup">Sauvegarder ma progression</button>
                <button class="btn btn-link" id="result-skip">Explorer d'abord</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         AUTH (SimplifiÃ©)
         ============================================ -->
    <div class="screen" id="auth">
        <button class="btn-back" id="auth-back">â†</button>
        <div class="auth-container">
            <div class="auth-header">
                <span class="auth-logo">ğŸ½ï¸</span>
                <h1 id="auth-title">Content de te revoir !</h1>
                <p id="auth-subtitle">Connecte-toi pour retrouver ta progression</p>
            </div>
            <form class="auth-form" id="auth-form">
                <div class="form-field" id="field-username">
                    <label>Comment on t'appelle ?</label>
                    <input type="text" id="input-username" placeholder="Ton pseudo">
                </div>
                <div class="form-field">
                    <label>Email</label>
                    <input type="email" id="input-email" placeholder="ton@email.com">
                </div>
                <div class="form-field">
                    <label>Mot de passe</label>
                    <input type="password" id="input-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <p class="auth-error" id="auth-error"></p>
                <button type="submit" class="btn btn-primary btn-full" id="auth-submit">Se connecter</button>
            </form>
            <p class="auth-switch">
                <span id="auth-switch-text">Pas encore de compte ?</span>
                <button type="button" id="auth-toggle">CrÃ©er un compte</button>
            </p>
        </div>
    </div>

    <!-- ============================================
         MAIN APP
         ============================================ -->
    <div class="screen" id="main">
        <header class="app-header">
            <div class="header-left">
                <span class="header-logo">ğŸ½ï¸</span>
                <span class="header-title">Yumr</span>
            </div>
            <div class="header-right">
                <button class="header-btn" id="header-streak">
                    <span>ğŸ”¥</span>
                    <span id="header-streak-count">1</span>
                </button>
                <button class="header-btn" id="header-xp">
                    <span>â­</span>
                    <span id="header-xp-count">0</span>
                </button>
            </div>
        </header>

        <main class="app-content">
            <!-- TAB: HOME -->
            <div class="tab active" id="tab-home">
                <div class="home-greeting">
                    <h1 id="home-greeting-text">On cuisine quoi aujourd'hui ?</h1>
                </div>

                <!-- HERO CARD - Plat du jour -->
                <div class="hero-card" id="hero-card">
                    <div class="hero-img" id="hero-img"></div>
                    <div class="hero-content">
                        <span class="hero-badge">âœ¨ Suggestion du jour</span>
                        <h2 id="hero-name">Chargement...</h2>
                        <div class="hero-meta">
                            <span id="hero-time">â±ï¸ --min</span>
                            <span id="hero-calories">ğŸ”¥ -- kcal</span>
                            <span id="hero-rating">â˜… --</span>
                        </div>
                        <div class="hero-actions">
                            <button class="btn btn-primary" id="hero-cook">ğŸ³ Cuisiner</button>
                            <button class="btn btn-glass btn-icon-only" id="hero-refresh" title="Autre suggestion">ğŸ”„</button>
                            <button class="btn btn-glass btn-icon-only" id="hero-menu" title="Voir le menu complet">ğŸ“‹</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions (3 max) -->
                <div class="quick-actions">
                    <button class="quick-action" data-action="fridge">
                        <span class="qa-icon">ğŸ§Š</span>
                        <span class="qa-label">Mon frigo</span>
                        <span class="qa-badge" id="qa-fridge-count">0</span>
                    </button>
                    <button class="quick-action" data-action="shopping">
                        <span class="qa-icon">ğŸ›’</span>
                        <span class="qa-label">Courses</span>
                        <span class="qa-badge" id="qa-shopping-count">0</span>
                    </button>
                    <button class="quick-action" data-action="challenge">
                        <span class="qa-icon">ğŸ¯</span>
                        <span class="qa-label">DÃ©fi du jour</span>
                        <span class="qa-badge qa-badge-xp">+75</span>
                    </button>
                </div>

                <!-- Stats compactes -->
                <div class="home-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="stat-level">1</span>
                        <span class="stat-label">Niveau</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-cooked">0</span>
                        <span class="stat-label">CuisinÃ©s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="stat-streak">1</span>
                        <span class="stat-label">Streak</span>
                    </div>
                    <div class="stat-item clickable" data-action="badges">
                        <span class="stat-value" id="stat-badges">0</span>
                        <span class="stat-label">Badges</span>
                    </div>
                </div>
            </div>

            <!-- TAB: EXPLORE -->
            <div class="tab" id="tab-explore">
                <div class="explore-header">
                    <h1>Explorer</h1>
                    <div class="search-bar">
                        <span>ğŸ”</span>
                        <input type="text" id="explore-search" placeholder="Rechercher une recette...">
                    </div>
                </div>
                <div class="filter-bar">
                    <button class="filter-btn active" data-filter="all">Tout</button>
                    <button class="filter-btn" data-filter="starter">ğŸ¥— EntrÃ©es</button>
                    <button class="filter-btn" data-filter="main">ğŸ Plats</button>
                    <button class="filter-btn" data-filter="dessert">ğŸ° Desserts</button>
                    <button class="filter-btn" data-filter="quick">âš¡ <15min</button>
                </div>
                <div class="recipes-grid" id="recipes-grid"></div>
                <div class="empty-state hidden" id="explore-empty">
                    <span>ğŸ”</span>
                    <h3>Aucune recette trouvÃ©e</h3>
                    <p>Essaie avec d'autres mots-clÃ©s</p>
                </div>
            </div>

            <!-- TAB: SOCIAL (Ligues + Feed fusionnÃ©s) -->
            <div class="tab" id="tab-social">
                <div class="social-tabs">
                    <button class="social-tab active" data-social="feed">Pour toi</button>
                    <button class="social-tab" data-social="leagues">Classement</button>
                </div>

                <!-- Feed -->
                <div class="social-content active" id="social-feed">
                    <div class="feed-list" id="feed-list"></div>
                    <div class="empty-state hidden" id="feed-empty">
                        <span>ğŸŒ</span>
                        <h3>Rien Ã  afficher</h3>
                        <p>Suis des chefs pour voir leurs crÃ©ations</p>
                        <button class="btn btn-primary">Explorer la communautÃ©</button>
                    </div>
                </div>

                <!-- Leagues -->
                <div class="social-content" id="social-leagues">
                    <div class="league-card">
                        <span class="league-icon">ğŸ¥‰</span>
                        <div class="league-info">
                            <strong>Ligue Bronze</strong>
                            <span>Top 50 â†’ Ligue Argent</span>
                        </div>
                        <div class="league-timer">
                            <span>Fin dans</span>
                            <strong>5j 12h</strong>
                        </div>
                    </div>
                    <div class="leaderboard" id="leaderboard"></div>
                </div>
            </div>

            <!-- TAB: PROFILE -->
            <div class="tab" id="tab-profile">
                <div class="profile-header">
                    <div class="profile-banner"></div>
                    <div class="profile-avatar-wrap">
                        <img class="profile-avatar" id="profile-avatar" src="https://i.pravatar.cc/80?img=33" alt="">
                        <span class="profile-level" id="profile-level">1</span>
                    </div>
                    <h2 id="profile-username">@chef</h2>
                    <div class="profile-type">
                        <span id="profile-type-emoji">ğŸ½ï¸</span>
                        <span id="profile-type-name">Foodie</span>
                    </div>
                </div>

                <div class="profile-xp-card">
                    <div class="xp-header">
                        <span>Niveau <strong id="profile-xp-level">1</strong></span>
                        <span><span id="profile-xp-current">0</span>/<span id="profile-xp-max">100</span> XP</span>
                    </div>
                    <div class="xp-bar">
                        <div class="xp-bar-fill" id="profile-xp-fill"></div>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="profile-stat">
                        <strong id="profile-posts">0</strong>
                        <span>Posts</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profile-followers">0</strong>
                        <span>AbonnÃ©s</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profile-following">0</strong>
                        <span>Suivis</span>
                    </div>
                </div>

                <div class="profile-badges-section">
                    <div class="section-header">
                        <h3>ğŸ… Mes badges</h3>
                        <button class="btn-link" data-action="all-badges">Voir tout</button>
                    </div>
                    <div class="badges-row" id="profile-badges"></div>
                    <div class="empty-state small hidden" id="badges-empty">
                        <span>ğŸ…</span>
                        <p>Cuisine pour dÃ©bloquer ton premier badge !</p>
                    </div>
                </div>

                <div class="profile-menu">
                    <button class="menu-item" data-action="preferences">
                        <span>âš™ï¸</span>
                        <span>PrÃ©fÃ©rences alimentaires</span>
                        <span>â€º</span>
                    </button>
                    <button class="menu-item" data-action="history">
                        <span>ğŸ“š</span>
                        <span>Historique des recettes</span>
                        <span>â€º</span>
                    </button>
                    <button class="menu-item premium" data-action="premium">
                        <span>ğŸ‘‘</span>
                        <span>Passer Premium</span>
                        <span>â€º</span>
                    </button>
                    <button class="menu-item" data-action="settings">
                        <span>ğŸ”§</span>
                        <span>ParamÃ¨tres</span>
                        <span>â€º</span>
                    </button>
                    <button class="menu-item danger" id="btn-logout">
                        <span>ğŸšª</span>
                        <span>Changer de compte</span>
                        <span></span>
                    </button>
                </div>
            </div>
        </main>

        <!-- FAB Central -->
        <button class="fab" id="fab">
            <span>+</span>
        </button>

        <!-- Navigation (4 onglets) -->
        <nav class="app-nav">
            <button class="nav-item active" data-tab="home">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">Accueil</span>
            </button>
            <button class="nav-item" data-tab="explore">
                <span class="nav-icon">ğŸ”</span>
                <span class="nav-label">Explorer</span>
            </button>
            <div class="nav-fab-space"></div>
            <button class="nav-item" data-tab="social">
                <span class="nav-icon">ğŸ†</span>
                <span class="nav-label">Social</span>
            </button>
            <button class="nav-item" data-tab="profile">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-label">Profil</span>
            </button>
        </nav>
    </div>

    <!-- ============================================
         TUTORIAL OVERLAY
         ============================================ -->
    <div class="tutorial-overlay" id="tutorial">
        <div class="tutorial-backdrop"></div>
        <div class="tutorial-spotlight" id="tutorial-spotlight"></div>
        <div class="tutorial-tooltip" id="tutorial-tooltip">
            <p id="tutorial-text"></p>
            <div class="tutorial-actions">
                <button class="btn btn-link" id="tutorial-skip">Passer</button>
                <button class="btn btn-primary btn-sm" id="tutorial-next">Suivant</button>
            </div>
            <div class="tutorial-dots" id="tutorial-dots"></div>
        </div>
    </div>

    <!-- ============================================
         MODALS
         ============================================ -->
    
    <!-- Modal: Frigo -->
    <div class="modal" id="modal-fridge">
        <div class="modal-backdrop" data-close="modal-fridge"></div>
        <div class="modal-sheet">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2>ğŸ§Š Mon frigo</h2>
                <button class="btn btn-primary btn-sm" id="btn-add-fridge">+ Ajouter</button>
            </div>
            <div class="modal-body" id="fridge-content"></div>
        </div>
    </div>

    <!-- Modal: Shopping -->
    <div class="modal" id="modal-shopping">
        <div class="modal-backdrop" data-close="modal-shopping"></div>
        <div class="modal-sheet">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2>ğŸ›’ Liste de courses</h2>
            </div>
            <div class="modal-body" id="shopping-content"></div>
        </div>
    </div>

    <!-- Modal: Challenge -->
    <div class="modal" id="modal-challenge">
        <div class="modal-backdrop" data-close="modal-challenge"></div>
        <div class="modal-sheet">
            <div class="modal-handle"></div>
            <div class="modal-body" id="challenge-content"></div>
        </div>
    </div>

    <!-- Modal: Menu complet -->
    <div class="modal" id="modal-menu">
        <div class="modal-backdrop" data-close="modal-menu"></div>
        <div class="modal-sheet large">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2>ğŸ“‹ Menu du jour</h2>
            </div>
            <div class="modal-body" id="menu-content"></div>
        </div>
    </div>

    <!-- Modal: Recipe Detail -->
    <div class="modal" id="modal-recipe">
        <div class="modal-backdrop" data-close="modal-recipe"></div>
        <div class="modal-sheet large">
            <div class="modal-handle"></div>
            <div class="modal-body" id="recipe-detail-content"></div>
        </div>
    </div>

    <!-- Modal: Create Post -->
    <div class="modal" id="modal-create">
        <div class="modal-backdrop" data-close="modal-create"></div>
        <div class="modal-sheet large">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2>CrÃ©er</h2>
                <button class="btn btn-primary btn-sm" id="btn-publish">Publier</button>
            </div>
            <div class="modal-body" id="create-content"></div>
        </div>
    </div>

    <!-- Modal: Badges -->
    <div class="modal" id="modal-badges">
        <div class="modal-backdrop" data-close="modal-badges"></div>
        <div class="modal-sheet large">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2>ğŸ… Tous les badges</h2>
            </div>
            <div class="modal-body" id="badges-content"></div>
        </div>
    </div>

    <!-- Modal: Post View -->
    <div class="modal fullscreen" id="modal-post">
        <div class="modal-fullscreen-content">
            <div class="modal-fullscreen-header">
                <button class="btn-back" data-close="modal-post">â†</button>
                <span>Publication</span>
                <button class="btn btn-glass btn-sm">â€¢â€¢â€¢</button>
            </div>
            <div class="modal-fullscreen-body" id="post-view-content"></div>
        </div>
    </div>

    <!-- Modal: User Profile View -->
    <div class="modal fullscreen" id="modal-user">
        <div class="modal-fullscreen-content">
            <div class="modal-fullscreen-header">
                <button class="btn-back" data-close="modal-user">â†</button>
                <span>Profil</span>
                <button class="btn btn-glass btn-sm">â€¢â€¢â€¢</button>
            </div>
            <div class="modal-fullscreen-body" id="user-view-content"></div>
        </div>
    </div>

    <!-- ============================================
         COOKING MODE (Fullscreen)
         ============================================ -->
    <div class="cooking-mode" id="cooking-mode">
        <div class="cooking-header">
            <button class="btn-back" id="cooking-exit">â†</button>
            <h2 id="cooking-title">Recette</h2>
            <button class="btn btn-glass btn-sm" id="cooking-home">ğŸ </button>
        </div>
        <div class="cooking-progress" id="cooking-progress"></div>
        <div class="cooking-body" id="cooking-body"></div>
        <div class="cooking-footer">
            <button class="btn btn-glass" id="cooking-prev">â† PrÃ©cÃ©dent</button>
            <button class="btn btn-primary" id="cooking-next">Suivant â†’</button>
        </div>
    </div>

    <!-- ============================================
         TOASTS & POPUPS
         ============================================ -->
    <div class="toasts-container" id="toasts"></div>
    
    <div class="xp-popup" id="xp-popup">
        <span class="xp-popup-icon">âœ¨</span>
        <span class="xp-popup-amount" id="xp-popup-amount">+50 XP</span>
    </div>

    <div class="levelup-popup" id="levelup-popup">
        <div class="levelup-content">
            <span class="levelup-icon">ğŸ‰</span>
            <h2>Niveau <span id="levelup-level">2</span> !</h2>
            <p>Continue comme Ã§a !</p>
            <button class="btn btn-primary" id="levelup-close">Super !</button>
        </div>
    </div>

</div>

<script src="app.js"></script>
</body>
</html>
